<app-navbar></app-navbar>
<app-welcome-section [nombre]="nombreUsuario" [rol]="rolUsuario"></app-welcome-section>

<section class="px-6 flex flex-col md:flex-row gap-6">
  <!-- Card 1: Último Resultado -->
  <div class="flex-1 border border-[#e5e5e5] rounded-md p-6 transition duration-300 hover:shadow-lg hover:-translate-y-1 bg-white">
    <h2 class="text-lg font-semibold mb-1">Resultados Recientes</h2>
    <p class="text-sm text-[#6b7280] mb-4">Accede a tus últimos análisis</p>

    <div *ngIf="ultimoResultado; else sinResultados" class="flex items-start space-x-3 mb-6">
      <i class="fas fa-file-medical text-[#9DEFB5] text-2xl mt-1"></i>
      <div>
        <p class="text-sm font-semibold">Resultado #{{ ultimoResultado.id }}</p>
        <p class="text-xs text-[#6b7280]">
          Disponible desde: {{ ultimoResultado.creadoEn | date: 'shortDate' }}
        </p>
      </div>
    </div>

    <ng-template #sinResultados>
      <p class="text-sm text-gray-500 mb-6">Aún no se han subido resultados.</p>
    </ng-template>

    <a
      routerLink="/resultados"
      class="block text-center w-full bg-[#9DEFB5] text-sm font-semibold py-2 rounded-md hover:bg-[#8fe0a9] transition duration-300"
    >
      Ver Resultados
    </a>
  </div>

  <!-- Card 2: Próximo Turno -->
<div
  *ngIf="proximoTurno"
  class="flex-1 border border-[#e5e5e5] rounded-md p-6 transition duration-300 hover:shadow-lg hover:-translate-y-1 bg-white">
  <h2 class="text-lg font-semibold mb-1">Próximo Turno</h2>
  <p class="text-sm text-[#6b7280] mb-4">Información de tu próxima visita</p>
  <div class="flex items-start space-x-3 mb-6">
    <i class="fas fa-calendar-day text-[#9DEFB5] text-2xl mt-1"></i>
    <div>
      <p class="text-sm font-semibold">Paciente: {{ proximoTurno.pacienteNombre }}</p>
      <p class="text-xs text-[#6b7280]">
        Fecha: {{ proximoTurno.fecha }} - {{ proximoTurno.hora }}
      </p>
    </div>
  </div>

  <!-- Mensajes -->
  <div *ngIf="successMsg" class="bg-green-100 text-green-800 px-3 py-2 rounded text-sm mb-2">
    {{ successMsg }}
  </div>
  <div *ngIf="errorMsg" class="bg-red-100 text-red-800 px-3 py-2 rounded text-sm mb-2">
    {{ errorMsg }}
  </div>

  <button
    (click)="cancelarTurno()"
    class="w-full bg-red-100 text-red-700 text-sm font-semibold py-2 rounded-md hover:bg-red-200 transition duration-300"
  >
    Cancelar Turno
  </button>
</div>

  <!-- Card 3: Agendar nuevo turno -->
  <div class="flex-1 border border-[#e5e5e5] rounded-md p-6 transition duration-300 hover:shadow-lg hover:-translate-y-1 bg-white">
    <h2 class="text-lg font-semibold mb-1">Solicitar Nuevo Turno</h2>
    <p class="text-sm text-[#6b7280] mb-4">Agenda tu próxima visita</p>
    <div class="flex items-start space-x-3 mb-6">
      <i class="fas fa-calendar-plus text-[#9DEFB5] text-2xl mt-1"></i>
      <div>
        <p class="text-sm font-semibold">Selecciona tipo de análisis</p>
        <p class="text-xs text-[#6b7280]">Disponibilidad inmediata</p>
      </div>
    </div>
    <a
      routerLink="/paciente-turnos"
      class="block text-center w-full bg-[#9DEFB5] text-sm font-semibold py-2 rounded-md hover:bg-[#8fe0a9] transition duration-300"
    >
      Agendar Turno
    </a>
  </div>
</section>
