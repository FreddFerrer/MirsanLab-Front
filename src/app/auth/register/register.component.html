<div class="flex min-h-screen items-center justify-center bg-[#aaf9c3]/5 p-4 text-[17px]">
  <div class="w-full max-w-md border border-[#aaf9c3] rounded-md bg-white shadow-sm">
    <div class="space-y-2 p-6 border-b">
      <div class="flex items-center gap-2">
        <div class="rounded-full bg-[#aaf9c3] p-2">
          <i class="fas fa-flask text-black text-base"></i>
        </div>
        <h2 class="text-2xl font-bold">LabSalud</h2>
      </div>
      <h2 class="text-2xl font-bold">Crear cuenta</h2>
      <p class="text-base text-gray-600">
        Complete el formulario para registrarse como paciente en nuestro sistema.
      </p>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-5 p-6">
      <!-- Nombre -->
      <div class="space-y-2">
        <label for="nombre" class="text-base font-medium">Nombre completo</label>
        <div class="relative">
          <i class="fas fa-user absolute left-3 top-3 text-gray-400 text-sm"></i>
          <input
            formControlName="nombre"
            type="text"
            id="nombre"
            class="w-full border border-gray-300 rounded-md pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#aaf9c3]"
            placeholder="Juan Pérez"
          />
        </div>
        <div *ngIf="f['nombre'].touched && f['nombre'].errors" class="text-sm text-red-600">
          <div *ngIf="f['nombre'].errors['required']">El nombre es obligatorio.</div>
        </div>
      </div>

      <!-- Email -->
      <div class="space-y-2">
        <label for="email" class="text-base font-medium">Email</label>
        <div class="relative">
          <i class="fas fa-envelope absolute left-3 top-3 text-gray-400 text-sm"></i>
          <input
            formControlName="email"
            type="email"
            id="email"
            class="w-full border border-gray-300 rounded-md pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#aaf9c3]"
            placeholder="nombre@ejemplo.com"
          />
        </div>
        <div *ngIf="f['email'].touched && f['email'].errors" class="text-sm text-red-600">
          <div *ngIf="f['email'].errors['required']">El email es obligatorio.</div>
          <div *ngIf="f['email'].errors['email']">Formato de email inválido.</div>
        </div>
        <div *ngIf="apiErrors['email']" class="text-sm text-red-600">
          {{ apiErrors['email'] }}
        </div>
      </div>

      <!-- Teléfono -->
      <div class="space-y-2">
        <label for="telefono" class="text-base font-medium">Teléfono</label>
        <div class="relative">
          <i class="fas fa-phone absolute left-3 top-3 text-gray-400 text-sm"></i>
          <input
            formControlName="telefono"
            type="text"
            id="telefono"
            class="w-full border border-gray-300 rounded-md pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#aaf9c3]"
            placeholder="+54 9 370 1234567"
          />
        </div>
        <div *ngIf="f['telefono'].touched && f['telefono'].errors" class="text-sm text-red-600">
          <div *ngIf="f['telefono'].errors['required']">El teléfono es obligatorio.</div>
        </div>
      </div>

      <!-- Password -->
      <div class="space-y-2">
        <label for="password" class="text-base font-medium">Contraseña</label>
        <div class="relative">
          <i class="fas fa-lock absolute left-3 top-3 text-gray-400 text-sm"></i>
          <input
            formControlName="password"
            type="password"
            id="password"
            class="w-full border border-gray-300 rounded-md pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#aaf9c3]"
            placeholder="••••••••"
          />
        </div>
        <p class="text-sm text-gray-500">
          La contraseña debe tener entre 4 y 20 caracteres, incluyendo una mayúscula y un número.
        </p>
        <div *ngIf="f['password'].touched && f['password'].errors" class="text-sm text-red-600">
          <div *ngIf="f['password'].errors['required']">La contraseña es obligatoria.</div>
          <div *ngIf="f['password'].errors['minlength']">Mínimo 4 caracteres.</div>
          <div *ngIf="f['password'].errors['maxlength']">Máximo 20 caracteres.</div>
          <div *ngIf="f['password'].errors['pattern']">Debe contener al menos una mayúscula y un número.</div>
        </div>
        <div *ngIf="apiErrors['password']" class="text-sm text-red-600">
          {{ apiErrors['password'] }}
        </div>
      </div>

      <!-- Confirm Password -->
      <div class="space-y-2">
        <label for="confirmPassword" class="text-base font-medium">Confirmar contraseña</label>
        <div class="relative">
          <i class="fas fa-lock absolute left-3 top-3 text-gray-400 text-sm"></i>
          <input
            formControlName="confirmPassword"
            type="password"
            id="confirmPassword"
            class="w-full border border-gray-300 rounded-md pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#aaf9c3]"
            placeholder="••••••••"
          />
        </div>
        <div *ngIf="form.errors?.['passwordsMismatch'] && f['confirmPassword'].touched" class="text-sm text-red-600">
          Las contraseñas no coinciden.
        </div>
      </div>

      <!-- Términos -->
      <div class="flex items-center gap-2">
        <input
          formControlName="terms"
          type="checkbox"
          id="terms"
          class="h-4 w-4 rounded border-gray-300 text-[#aaf9c3] focus:ring-[#aaf9c3]"
        />
        <label for="terms" class="text-base text-gray-600">
          Acepto los
          <a href="#" class="text-black underline underline-offset-4">términos y condiciones</a>
        </label>
      </div>
      <div *ngIf="f['terms'].touched && f['terms'].errors" class="text-sm text-red-600">
        Debes aceptar los términos y condiciones.
      </div>

      <!-- Éxito -->
      <div *ngIf="successMessage"
        class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative">
        {{ successMessage }}
      </div>

      <!-- Error -->
      <div *ngIf="generalError" class="text-sm text-red-600">
        {{ generalError }}
      </div>

      <!-- Botón -->
      <button
        type="submit"
        class="w-full bg-[#aaf9c3] text-black font-semibold py-3 rounded-md hover:bg-[#8fe0a9] transition"
      >
        Crear cuenta
      </button>

      <a
        routerLink="/login"
        class="flex items-center justify-center gap-2 text-base text-gray-600 hover:text-black transition"
      >
        <i class="fas fa-arrow-left text-xs"></i>
        Volver al inicio de sesión
      </a>
    </form>
  </div>
</div>
